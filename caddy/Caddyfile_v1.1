# This replaces the existing content in /etc/caddy/Caddyfile
# A CONFIG SECTION FOR YOUR HOSTNAME
{
	# You can set your email here (for ACME) or leave it empty
	email admin@${DOMAIN}
}

${DOMAIN} {
	# HTTP/2 + compression
	encode zstd gzip

	# Long cache for static assets (safe for hashed / versioned paths)
	header /assets/* /modules/* /systems/* /worlds/* /fonts/* {
		Cache-Control "public, max-age=604800, immutable"
	}

	# Light hardening
	header {
		X-Frame-Options "SAMEORIGIN"
		Referrer-Policy "no-referrer-when-downgrade"
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
	}

	# (Optional, keep commented until you want CDN)
	# import /etc/caddy/snippets/cdn.caddy

	# Reverse proxy to Foundry on localhost
	reverse_proxy 127.0.0.1:30000
}